function l({name:s,recordKey:n,state:a}){return{error:void 0,isLoading:!1,state:a,modal:null,offset:0,init(){console.log("initialized"),Livewire.hook("commit",({component:t,commit:i,succeed:o,fail:d,respond:u})=>{o(({snapshot:f,effect:h})=>{this.$nextTick(()=>{if(this.isLoading||t.id!==this.$root.closest("[wire\\:id]").attributes["wire:id"].value)return;let r=this.getServerState();r===void 0||this.getNormalizedState()===r||(this.state=r)})})}),this.$watch("state",async()=>{let t=this.getServerState();if(console.log("server state",t),t===void 0||this.getNormalizedState()===t){console.log("Do nothing");return}console.log("update table column state"),this.isLoading=!0;let i=await this.$wire.updateTableColumnState(s,n,this.state);console.log("RESPONSE",i),this.error=i?.error??void 0,!this.error&&this.$refs.serverState&&(this.$refs.serverState.value=this.getNormalizedState()),this.isLoading=!1});let e=this.$el;for(;e!=null;){if(e.classList&&e.classList.contains("fi-modal-window")){this.modal=e;break}e=e.parentElement}},getServerState(){if(this.$refs.serverState)return[null,void 0].includes(this.$refs.serverState.value)?"":this.$refs.serverState.value.replaceAll('\\"','"')},getNormalizedState(){let e=Alpine.raw(this.state);return[null,void 0].includes(e)?"":e}}}export{l as default};
